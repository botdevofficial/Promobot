<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Promoter Bot & Link Tracker</title>
    
    <!-- Tailwind CSS, Google Fonts, and Chart.js -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display-swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        .glass-nav { 
            backdrop-filter: blur(12px) saturate(180%); 
            -webkit-backdrop-filter: blur(12px) saturate(180%);
            background-color: rgba(255, 255, 255, 0.75);
        }
        .dark .glass-nav {
             background-color: rgba(15, 23, 42, 0.75);
        }
        .view {
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
        }
        .view.hidden {
            opacity: 0;
            transform: scale(0.98);
            pointer-events: none;
            position: absolute;
        }
        .table-container { overflow-x: auto; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #888; border-radius: 4px; }
        .dark ::-webkit-scrollbar-thumb { background: #555; }
    </style>
</head>
<body class="bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-200 transition-colors duration-300">

    <!-- Header & Navigation -->
    <header class="sticky top-0 z-50 glass-nav border-b border-slate-200/80 dark:border-slate-700/80">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <button id="home-view-btn" class="font-bold text-xl text-slate-900 dark:text-white">Promoter Bot</button>
                <nav class="hidden md:flex items-center gap-6 text-sm font-medium text-slate-600 dark:text-slate-300">
                    <button id="tracker-view-btn" class="flex items-center gap-2 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors">
                        üîó Link Tracker
                    </button>
                    <!-- Stand Bot specific nav links -->
                    <a href="#features" class="stand-bot-nav hover:text-indigo-600 dark:hover:text-indigo-400">Features</a>
                    <a href="#premium" class="stand-bot-nav hover:text-indigo-600 dark:hover:text-indigo-400">Premium</a>
                    <a href="#contact" class="stand-bot-nav hover:text-indigo-600 dark:hover:text-indigo-400">Contact</a>
                </nav>
                <div class="flex items-center gap-2">
                     <span id="user-display" class="hidden text-sm font-medium text-slate-600 dark:text-slate-400"></span>
                     <button id="logout-button" class="hidden text-sm font-medium hover:text-indigo-600 dark:hover:text-indigo-400">Logout</button>
                    <button id="themeToggle" class="p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700"></button>
                </div>
            </div>
        </div>
    </header>

    <main class="relative">
        <!-- Stand Bot View -->
        <div id="stand-bot-view" class="view">
             <!-- Hero -->
            <section id="home" class="py-14 sm:py-20 px-4">
                <div class="max-w-6xl mx-auto text-center">
                    <h1 class="text-4xl sm:text-6xl font-extrabold leading-tight text-slate-900 dark:text-white">Boost your Telegram with <span class="text-indigo-600">Promoter Bot</span></h1>
                    <p class="mt-4 max-w-2xl mx-auto text-lg text-slate-700 dark:text-slate-300">Auto-promote your link, earn referral credits, and unlock premium tools to grow your audience.</p>
                    <div class="mt-8 flex flex-wrap justify-center gap-4">
                        <a id="ctaStart" href="https://t.me/anoni67_bot?start=start" class="px-6 py-3 rounded-xl bg-indigo-600 text-white font-semibold shadow-lg hover:bg-indigo-700 transition">üöÄ Start Bot</a>
                        <a id="ctaGroup" href="https://t.me/anoni67_bot?startgroup=addme" class="px-6 py-3 rounded-xl bg-slate-800 text-white dark:bg-slate-700 hover:bg-black dark:hover:bg-slate-600 transition">‚ûï Add to Group</a>
                    </div>
                </div>
            </section>

            <!-- Features -->
            <section id="features" class="py-14 sm:py-20 bg-slate-100 dark:bg-slate-950/50 px-4">
                <div class="max-w-6xl mx-auto">
                    <h2 class="text-3xl sm:text-4xl font-bold text-center mb-12">Powerful Features</h2>
                    <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="p-6 rounded-2xl bg-white dark:bg-slate-800 shadow-lg"><h3 class="font-semibold mb-1">üì¢ Auto Promotion</h3><p class="text-sm text-slate-600 dark:text-slate-400">Reach <b>15</b> unique users per promotion.</p></div>
                        <div class="p-6 rounded-2xl bg-white dark:bg-slate-800 shadow-lg"><h3 class="font-semibold mb-1">üì¢ Auto Promotion to Groups</h3><p class="text-sm text-slate-600 dark:text-slate-400">Reach <b>multiple super Groups</b> per promotion.</p></div>
                        <div class="p-6 rounded-2xl bg-white dark:bg-slate-800 shadow-lg"><h3 class="font-semibold mb-1">‚è≥ Daily Credits</h3><p class="text-sm text-slate-600 dark:text-slate-400"><b>4</b> free promotions every day.</p></div>
                        <div class="p-6 rounded-2xl bg-white dark:bg-slate-800 shadow-lg"><h3 class="font-semibold mb-1">üë• Referral Rewards</h3><p class="text-sm text-slate-600 dark:text-slate-400">3 referrals = <b>+4</b> extra promotions.</p></div>
                        <div class="p-6 rounded-2xl bg-white dark:bg-slate-800 shadow-lg cursor-pointer hover:ring-2 ring-indigo-500 transition" id="tracker-feature-card"><h3 class="font-semibold mb-1">üîó Free Link Tracker</h3><p class="text-sm text-slate-600 dark:text-slate-400">Shorten & track clicks on your links. Click to try!</p></div>
                    </div>
                </div>
            </section>
            
            <!-- Premium -->
            <section id="premium" class="py-14 sm:py-20 px-4">
                 <div class="max-w-4xl mx-auto text-center">
                    <h2 class="text-3xl sm:text-4xl font-bold mb-4">‚≠ê Go Premium</h2>
                    <p class="text-slate-600 dark:text-slate-400 mb-8">Unlock <b>/picbroad</b> to message 250 users/day & get <b>10x ChatPromo</b> daily.</p>
                     <div class="grid sm:grid-cols-3 gap-6 text-left">
                        <div class="p-6 rounded-2xl shadow-lg bg-white dark:bg-slate-800"><h3 class="font-semibold text-lg">1 Week</h3><div class="text-3xl font-extrabold mt-2">‚Çπ30 <span class="text-sm opacity-80">/ 15‚≠ê</span></div></div>
                        <div class="p-6 rounded-2xl shadow-lg bg-white dark:bg-slate-800 border-2 border-indigo-500"><h3 class="font-semibold text-lg">3 Weeks</h3><div class="text-3xl font-extrabold mt-2">‚Çπ75 <span class="text-sm opacity-80">/ 38‚≠ê</span></div></div>
                        <div class="p-6 rounded-2xl shadow-lg bg-white dark:bg-slate-800"><h3 class="font-semibold text-lg">1 Month</h3><div class="text-3xl font-extrabold mt-2">‚Çπ89 <span class="text-sm opacity-80">/ 45‚≠ê</span></div></div>
                    </div>
                    <a id="ctaPremium" href="https://t.me/chosentwo_bot" class="inline-block mt-8 px-5 py-3 rounded-xl border border-slate-300 dark:border-slate-600 hover:bg-slate-100 dark:hover:bg-slate-800 transition">üí¨ Pay / Support</a>
                </div>
            </section>

            <!-- Contact -->
             <section id="contact" class="py-14 sm:py-20 bg-slate-100 dark:bg-slate-950/50 px-4">
                <div class="max-w-6xl mx-auto text-center">
                    <h2 class="text-3xl sm:text-4xl font-bold mb-4">üìû Support</h2>
                    <p class="text-slate-700 dark:text-slate-300 mb-6">Questions or custom bot inquiries?</p>
                    <a href="https://t.me/chosentwo_bot" class="px-6 py-3 rounded-xl bg-indigo-600 text-white font-semibold shadow-lg hover:bg-indigo-700 transition">Contact Admin</a>
                </div>
            </section>
        </div>

        <!-- Link Tracker View -->
        <div id="link-tracker-view" class="view hidden">
            <!-- Login Section -->
            <section id="login-section" class="max-w-md mx-auto py-12">
                <div class="bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl">
                    <h2 class="text-2xl font-bold text-center">Link Tracker Login</h2>
                    <p class="text-center mt-2 text-sm text-slate-600 dark:text-slate-400">Enter your User ID to manage your links.</p>
                    <div class="mt-6 space-y-4">
                        <input type="text" id="user-id" class="mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md" placeholder="e.g., 7097744702">
                        <button id="login-button" class="w-full py-3 px-4 rounded-xl text-white bg-indigo-600 hover:bg-indigo-700">Login</button>
                    </div>
                    <div id="login-error" class="mt-4 text-center text-sm text-red-500"></div>
                </div>
            </section>

            <!-- Dashboard Section -->
            <section id="dashboard-section" class="hidden max-w-7xl mx-auto py-12">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg"><h3 class="text-sm font-medium">Total Links</h3><p id="total-links" class="mt-1 text-3xl font-semibold">0</p></div>
                    <div class="bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg"><h3 class="text-sm font-medium">Total Clicks</h3><p id="total-clicks" class="mt-1 text-3xl font-semibold">0</p></div>
                </div>
                <div class="mt-8 grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-1"><div class="bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg"><h3 class="text-lg font-semibold mb-4">Create new link</h3><input type="url" id="original-link" class="mt-1 block w-full px-3 py-2 bg-slate-50 dark:bg-slate-700 border rounded-md" placeholder="https://example.com"><button id="create-link-button" class="w-full mt-4 py-3 px-4 rounded-xl text-white bg-indigo-600 hover:bg-indigo-700">Generate</button><div id="new-link-display" class="mt-4 hidden p-3 bg-indigo-50 dark:bg-slate-700 rounded-md"><input type="text" id="new-short-link" class="w-full bg-transparent font-mono text-sm" readonly></div></div></div>
                    <div class="lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg"><h3 class="font-semibold mb-2">Top 5 Links by Clicks</h3><canvas id="clicks-chart"></canvas></div>
                </div>
                <div class="mt-8 bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg">
                     <h3 class="font-semibold mb-4">Your Links</h3>
                     <div class="table-container">
                        <table class="min-w-full"><thead class="bg-slate-50 dark:bg-slate-700"><tr><th class="px-6 py-3 text-left text-xs font-medium uppercase">Short Link</th><th class="px-6 py-3 text-left text-xs font-medium uppercase">Original</th><th class="px-6 py-3 text-left text-xs font-medium uppercase">Clicks</th><th class="px-6 py-3 text-left text-xs font-medium uppercase">Created</th></tr></thead><tbody id="links-table-body"></tbody></table>
                    </div>
                </div>
            </section>
        </div>
        <div id="loading-spinner" class="hidden fixed inset-0 bg-black/20 z-50 flex items-center justify-center"><div class="w-12 h-12 border-4 border-white border-t-indigo-500 rounded-full animate-spin"></div></div>
    </main>
    
    <footer class="bg-slate-900/95 text-slate-400 py-8 text-center mt-12">
        <p>&copy; 2025 Promoter Bot & Link Tracker. All rights reserved.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- CONFIG ---
            const STAND_BOT_CONFIG = {
                BIN_ID: '68b4029243b1c97be931d983', // IMPORTANT: Replace with Stand Bot analytics Bin ID
                API_KEY: '$2a$10$OWB0wBTxocZeAjW4yY5pyOQwnVSUr5a3bovRM9LZM5NJI8zpiT3eS',   // IMPORTANT: Replace with Stand Bot Master Key
            };
            const LINK_TRACKER_CONFIG = {
                API_KEY: "$2a$10$KXx5Yb2HF6z292WnEjQcY.P/WggIJ9sbwMXyhT9UmzFPtlyavGGlK",
                BIN_ID: "6877dbaf3052b733d10d94bc",
                DOMAIN: "https://botdevofficial.github.io/404_check/",
            };

            // --- UI ELEMENTS ---
            const views = {
                standBot: document.getElementById('stand-bot-view'),
                linkTracker: document.getElementById('link-tracker-view'),
            };
            const navElements = {
                standBot: document.querySelectorAll('.stand-bot-nav'),
                userDisplay: document.getElementById('user-display'),
                logoutButton: document.getElementById('logout-button'),
            };
            const viewButtons = {
                home: document.getElementById('home-view-btn'),
                tracker: document.getElementById('tracker-view-btn'),
                trackerCard: document.getElementById('tracker-feature-card'),
            };
            const loginElements = {
                section: document.getElementById('login-section'),
                button: document.getElementById('login-button'),
                userIdInput: document.getElementById('user-id'),
                error: document.getElementById('login-error'),
            };
            const dashboardElements = {
                section: document.getElementById('dashboard-section'),
                createButton: document.getElementById('create-link-button'),
                originalLinkInput: document.getElementById('original-link'),
                newLinkDisplay: document.getElementById('new-link-display'),
                newShortLinkInput: document.getElementById('new-short-link'),
            };
            const spinner = document.getElementById('loading-spinner');
            let clicksChart = null;
            let currentUserId = null;

            // --- THEME ---
            const themeToggle = document.getElementById('themeToggle');
            const sunIcon = `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>`;
            const moonIcon = `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>`;
            const isDark = localStorage.getItem('theme') !== 'light';
            if (isDark) { document.documentElement.classList.add('dark'); themeToggle.innerHTML = sunIcon; } 
            else { themeToggle.innerHTML = moonIcon; }
            themeToggle.addEventListener('click', () => {
                const isDarkNow = document.documentElement.classList.toggle('dark');
                localStorage.setItem('theme', isDarkNow ? 'dark' : 'light');
                themeToggle.innerHTML = isDarkNow ? sunIcon : moonIcon;
            });

            // --- VIEW MANAGEMENT ---
            function switchView(viewName) {
                Object.values(views).forEach(v => v.classList.add('hidden'));
                views[viewName].classList.remove('hidden');
                localStorage.setItem('activeView', viewName);
                
                const isTracker = viewName === 'linkTracker';
                navElements.standBot.forEach(el => el.style.display = isTracker ? 'none' : 'block');
                navElements.userDisplay.classList.toggle('hidden', !isTracker || !currentUserId);
                navElements.logoutButton.classList.toggle('hidden', !isTracker || !currentUserId);
            }

            // --- API HELPERS ---
            async function fetchData(config) {
                const res = await fetch(`https://api.jsonbin.io/v3/b/${config.BIN_ID}/latest`, { headers: { 'X-Master-Key': config.API_KEY } });
                if (!res.ok) throw new Error('Could not fetch data.');
                return (await res.json()).record || {};
            }

            async function updateData(config, newData) {
                await fetch(`https://api.jsonbin.io/v3/b/${config.BIN_ID}`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json', 'X-Master-Key': config.API_KEY },
                    body: JSON.stringify(newData)
                });
            }

            // --- STAND BOT ANALYTICS ---
            async function logStandBotEvent(event) {
                if (!STAND_BOT_CONFIG.BIN_ID.startsWith('YOUR')) {
                    try {
                        const data = await fetchData(STAND_BOT_CONFIG);
                        if (!data.events) data.events = [];
                        data.events.push({ ts: new Date().toISOString(), event, ua: navigator.userAgent });
                        await updateData(STAND_BOT_CONFIG, data);
                    } catch (e) { console.warn('StandBot logging failed:', e); }
                }
            }
            document.getElementById('ctaStart').addEventListener('click', () => logStandBotEvent('click_start'));
            document.getElementById('ctaGroup').addEventListener('click', () => logStandBotEvent('click_add_group'));
            document.getElementById('ctaPremium').addEventListener('click', () => logStandBotEvent('click_premium_support'));
            logStandBotEvent('visit');

            // --- LINK TRACKER LOGIC ---
            function showSpinner(show) { spinner.classList.toggle('hidden', !show); }

            async function login(userId) {
                showSpinner(true);
                loginElements.error.textContent = '';
                try {
                    localStorage.setItem('loggedInUserId', userId);
                    currentUserId = userId;
                    await refreshDashboard();
                } catch (e) {
                    loginElements.error.textContent = `Error: ${e.message}`;
                } finally {
                    showSpinner(false);
                }
            }
            
            async function refreshDashboard() {
                 if (!currentUserId) return;
                 showSpinner(true);
                 try {
                    const allData = await fetchData(LINK_TRACKER_CONFIG);
                    displayDashboard(currentUserId, allData);
                 } catch(e) {
                    alert('Could not refresh data. Please try again.');
                 } finally {
                    showSpinner(false);
                 }
            }

            function displayDashboard(userId, allData) {
                navElements.userDisplay.textContent = `User: ${userId}`;
                navElements.userDisplay.classList.remove('hidden');
                navElements.logoutButton.classList.remove('hidden');
                loginElements.section.classList.add('hidden');
                dashboardElements.section.classList.remove('hidden');

                const userLinks = Object.entries(allData).filter(([_, v]) => v && v.owner_id === userId).map(([k, v]) => ({ short_code: k, ...v }));
                renderStats(userLinks);
                renderChart(userLinks);
                renderTable(userLinks);
            }

            function renderStats(links) {
                document.getElementById('total-links').textContent = links.length;
                document.getElementById('total-clicks').textContent = links.reduce((s, l) => s + (l.clicks || 0), 0);
            }
            
            function renderChart(links) {
                const sorted = [...links].sort((a, b) => (b.clicks || 0) - (a.clicks || 0)).slice(0, 5);
                const ctx = document.getElementById('clicks-chart').getContext('2d');
                if(clicksChart) clicksChart.destroy();
                clicksChart = new Chart(ctx, { type: 'bar', data: { labels: sorted.map(l => l.short_code), datasets: [{ label: 'Clicks', data: sorted.map(l => l.clicks || 0), backgroundColor: 'rgba(99, 102, 241, 0.6)' }] }, options: { indexAxis: 'y' } });
            }

            function renderTable(links) {
                const tableBody = document.getElementById('links-table-body');
                tableBody.innerHTML = links.length === 0 ? `<tr><td colspan="4" class="text-center py-8 text-slate-500">No links created yet.</td></tr>` : links.sort((a,b) => new Date(b.created_at) - new Date(a.created_at)).map(link => {
                    const shortUrl = `${LINK_TRACKER_CONFIG.DOMAIN}${link.short_code}`;
                    return `<tr><td class="px-6 py-4"><div class="flex items-center gap-2"><a href="${shortUrl}" target="_blank" class="text-indigo-500 font-medium">${shortUrl}</a><button class="copy-btn p-1 rounded hover:bg-slate-200 dark:hover:bg-slate-700" data-link="${shortUrl}">${moonIcon.replace('w-6 h-6', 'w-4 h-4')}</button></div></td><td class="px-6 py-4 max-w-xs truncate">${link.original_link}</td><td class="px-6 py-4 font-semibold">${link.clicks || 0}</td><td class="px-6 py-4 text-sm">${new Date(link.created_at).toLocaleDateString()}</td></tr>`;
                }).join('');
            }
            
            async function createNewLink() {
                const originalLink = dashboardElements.originalLinkInput.value.trim();
                if (!originalLink || !currentUserId) return alert('Please enter a valid URL.');
                showSpinner(true);
                try {
                    const allData = await fetchData(LINK_TRACKER_CONFIG);
                    const shortCode = Math.random().toString(36).substring(2, 8);
                    allData[shortCode] = { original_link: originalLink, owner_id: currentUserId, created_at: new Date().toISOString(), clicks: 0 };
                    await updateData(LINK_TRACKER_CONFIG, allData);
                    dashboardElements.originalLinkInput.value = '';
                    dashboardElements.newShortLinkInput.value = `${LINK_TRACKER_CONFIG.DOMAIN}${shortCode}`;
                    dashboardElements.newLinkDisplay.classList.remove('hidden');
                    await refreshDashboard();
                } catch(e) { alert(`Error: ${e.message}`); } 
                finally { showSpinner(false); }
            }
            
            function logout() {
                localStorage.removeItem('loggedInUserId');
                currentUserId = null;
                dashboardElements.section.classList.add('hidden');
                loginElements.section.classList.remove('hidden');
                navElements.userDisplay.classList.add('hidden');
                navElements.logoutButton.classList.add('hidden');
                loginElements.userIdInput.value = '';
            }

            // --- EVENT LISTENERS ---
            viewButtons.home.addEventListener('click', () => switchView('standBot'));
            viewButtons.tracker.addEventListener('click', () => switchView('linkTracker'));
            viewButtons.trackerCard.addEventListener('click', () => switchView('linkTracker'));
            loginElements.button.addEventListener('click', () => {
                const userId = loginElements.userIdInput.value.trim();
                if (userId) login(userId);
            });
            dashboardElements.createButton.addEventListener('click', createNewLink);
            navElements.logoutButton.addEventListener('click', logout);
            document.getElementById('links-table-body').addEventListener('click', (e) => {
                const button = e.target.closest('.copy-btn');
                if (button) navigator.clipboard.writeText(button.dataset.link);
            });

            // --- INITIALIZATION ---
            const savedView = localStorage.getItem('activeView') || 'standBot';
            const savedUserId = localStorage.getItem('loggedInUserId');
            switchView(savedView);
            if (savedView === 'linkTracker' && savedUserId) {
                loginElements.userIdInput.value = savedUserId;
                login(savedUserId);
            }
        });
    </script>
</body>
</html>
